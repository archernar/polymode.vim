</head><body>
<nav class='top-nav' data-js-no-preview role='navigation'>
<div class='container'>
<div class='left'>
<a class='home back-button' href='.'></a>
</div>
<a class='brand' href='.'>
Devhints.io
</a>
<div class='actions'>
<ul class="social-list social page-actions">
<li class="facebook link hint--bottom" data-hint="Share on Facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=https://devhints.io/vimscript.html" target="share"><span class="text"></span></a></li>
<li class="twitter link hint--bottom" data-hint="Share on Twitter"><a href="https://twitter.com/intent/tweet?text=The%20ultimate%20cheatsheet%20for%20Vim%20scripting.%20https://devhints.io/vimscript.html" target="share"><span class="text"></span></a></li>
</ul>
<ul class='page-actions'>
<li class='link github -button hint--bottom' data-hint='Edit this page on GitHub'>
<a href='https://github.com/rstacruz/cheatsheets/blob/master/vimscript.md'>
<span class='text -visible'>Edit</span>
</a>
</li>
</ul>
</div>
</div>
</nav>
<div class='body-area'>
<header class='main-heading -center' role='banner'>
<h1 class='h1'>Vim scripting <em>cheatsheet</em></h1>
<div class='adbox' data-js-no-preview>
<div class='ad -berry' role='complementary'>
<aside class='berry-sponsor' data-js-no-preview>
<div class='cs__wrapper'>
<div class='cs__header'>Proudly sponsored by</div>
<a href='https://cs.berry.sh/c/ff1cfaca-b614-423d-bda9-5daa28662c5b' class='cs__blurb' target='_blank' rel='noopener'>
<strong>Rollbar</strong>
<span>Real-time JavaScript error monitoring, alerting, and analytics for developers ðŸš€</span>
</a>
<img class='cs__pixel' src='https://cs.berry.sh/l/ff1cfaca-b614-423d-bda9-5daa28662c5b/pixel.png' />
</div>
</aside>
</div>
</div>
</header>
<main class='post-content MarkdownBody' data-js-main-body role='main'>
<h3 id="start-hacking">Start hacking</h3>
<pre><code class="language-vim">let name = "John"
echo "Hello, " . name
</code></pre>
<p>You can either put this in a script (<code>script.vim</code>) and run it (<code>:source script.vim</code>), or you can type the commands individually in normal mode as <code>:let</code> and <code>:echo</code>.</p>
<h3 id="learn-by-example">Learn by example</h3>
<pre><code class="language-vim">function! SuperTab()
  let l:part = strpart(getline('.'),col('.')-2,1)
  if (l:part=~'^\W\?$')
      return "\&lt;Tab&gt;"
  else
      return "\&lt;C-n&gt;"
  endif
endfunction

imap &lt;Tab&gt; &lt;C-R&gt;=SuperTab()&lt;CR&gt;
</code></pre>
<p><a href="http://www.vimbits.com/bits/46">Here</a>â€™s another example with <a href="#functions">functions</a>, <a href="#variables">variables</a> and <a href="#mapping">mapping</a>.</p>
<h2 id="variables">Variables</h2>
<h3 class="-prime" id="defining">Defining</h3>
<pre><code class="language-vim">let var = "hello"
</code></pre>
<h3 id="variable-prefixes">Variable prefixes</h3>
<pre><code class="language-vim">let g:ack_options = '-s -H'    " g: global
let s:ack_program = 'ack'      " s: local (to script)
let l:foo = 'bar'              " l: local (to function)
</code></pre>
<p>The <code>s:</code> prefix is also available in function names. See <code>:help local-variables</code></p>
<h3 id="other-prefixes">Other prefixes</h3>
<pre><code class="language-vim">let w:foo = 'bar'    " w: window
let b:state = 'on'   " b: buffer
let t:state = 'off'  " t: tab
echo v:var           " v: vim special
</code></pre>
<pre><code class="language-vim">let @/ = ''          " @  register (this clears last search pattern)
echo $PATH           " $  env
</code></pre>
<h3 id="vim-options">Vim options</h3>
<pre><code class="language-vim">echo 'tabstop is ' . &amp;tabstop
if &amp;insertmode
echo &amp;g:option
echo &amp;l:option
</code></pre>
<p>Prefix Vim options with <code>&amp;</code></p>
<h3 id="operators">Operators</h3>
<pre><code class="language-vim">a + b             " numbers only!
'hello ' . name   " concat
</code></pre>
<pre><code class="language-vim">let var -= 2
let var += 5
let var .= 'string'   " concat
</code></pre>
<h2 id="strings">Strings</h2>
<h3 id="strings-1">Strings</h3>
<pre><code class="language-vim">let str = "String"
let str = "String with \n newline"

let literal = 'literal, no \ escaping'
let literal = 'that''s enough'  " double '' =&gt; '

echo "result = " . re   " concatenation
</code></pre>
<p>Also see <code>:help literal-string</code> and <code>:help expr-quote</code>.
See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/26.html">Strings</a></p>
<h3 id="string-functions">String functions</h3>
<pre><code class="language-vim">strlen(str)    " length
len(str)       " same
strchars(str)  " character length

split("one two three")       "=&gt; ['one', 'two', 'three']
split("one.two.three", '.')  "=&gt; ['one', 'two', 'three']

join(['a', 'b'], ',')  "=&gt; 'a,b'

tolower('Hello')
toupper('Hello')
</code></pre>
<p>Also see <code>:help functions</code>
See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/27.html">String functions</a></p>
<h2 id="functions">Functions</h2>
<h3 class="-prime" id="functions-1">Functions</h3>
<pre><code class="language-vim">" prefix with s: for local script-only functions
function! s:Initialize(cmd, args)
  " a: prefix for arguments
  echo "Command: " . a:cmd

  return true
endfunction
</code></pre>
<p>See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/23.html">Functions</a></p>
<h3 id="namespacing">Namespacing</h3>
<pre><code class="language-vim">function! myplugin#hello()
</code></pre>
<h3 id="calling-functions">Calling functions</h3>
<pre><code class="language-vim">call s:Initialize()
call s:Initialize("hello")
</code></pre>
<h3 id="consuming-return-values">Consuming return values</h3>
<pre><code class="language-vim">echo "Result: " . s:Initialize()
</code></pre>
<h3 id="abortable">Abortable</h3>
<pre><code class="language-vim">function! myfunction() abort
endfunction
</code></pre>
<p>Aborts when an error occurs.</p>
<h3 id="var-arguments">Var arguments</h3>
<pre><code class="language-vim">function! infect(...)
  echo a:0    "=&gt; 2
  echo a:1    "=&gt; jake
  echo a:2    "=&gt; bella

  for s in a:000  " a list
    echon ' ' . s
  endfor
endfunction

infect('jake', 'bella')
</code></pre>
<p>See <code>:help function-argument</code>. See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/24.html">Var arguments</a></p>
<h2 id="loops">Loops</h2>
<pre><code class="language-vim">for s in list
  echo s
  continue  " jump to start of loop
  break     " breaks out of a loop
endfor
</code></pre>
<pre><code class="language-vim">while x &lt; 5
endwhile
</code></pre>
<h2 id="custom-commands">Custom commands</h2>
<h3 class="-prime" id="custom-commands-1">Custom commands</h3>
<pre><code class="language-vim">command! Save :set fo=want tw=80 nowrap
</code></pre>
<p>Custom commands start with uppercase letters. The <code>!</code> redefines a command if it already exists.</p>
<h3 id="commands-calling-functions">Commands calling functions</h3>
<pre class="-setup"><code class="language-vim">command! Save call &lt;SID&gt;foo()
</code></pre>
<pre><code class="language-vim">function! s:foo()
  ...
endfunction
</code></pre>
<h3 id="commands-with-arguments">Commands with arguments</h3>
<pre class="-setup"><code class="language-vim">command! -nargs=? Save call script#foo(&lt;args&gt;)
</code></pre>
<table>
<thead>
<tr>
<th>What</th>
<th>What</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-nargs=0</code></td>
<td>0 arguments, default</td>
</tr>
<tr>
<td><code>-nargs=1</code></td>
<td>1 argument, includes spaces</td>
</tr>
<tr>
<td><code>-nargs=?</code></td>
<td>0 or 1 argument</td>
</tr>
<tr>
<td><code>-nargs=*</code></td>
<td>0+ arguments, space separated</td>
</tr>
<tr>
<td><code>-nargs=+</code></td>
<td>1+ arguments, space reparated</td>
</tr>
</tbody>
</table>
<h2 id="flow">Flow</h2>
<h3 id="conditionals">Conditionals</h3>
<pre><code class="language-vim">let char = getchar()
if char == "\&lt;LeftMouse&gt;"
  " ...
elseif char == "\&lt;RightMouse&gt;"
  " ...
else
  " ...
endif
</code></pre>
<h3 id="truthiness">Truthiness</h3>
<pre><code class="language-vim">if 1 | echo "true"  | endif
if 0 | echo "false" | endif
</code></pre>
<pre><code class="language-vim">if 1       "=&gt; 1 (true)
if 0       "=&gt; 0 (false)
if "1"     "=&gt; 1 (true)
if "456"   "=&gt; 1 (true)
if "xfz"   "=&gt; 0 (false)
</code></pre>
<p>No booleans. <code>0</code> is false, <code>1</code> is true.
See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/21.html">Truthiness</a></p>
<h3 id="operators-1">Operators</h3>
<pre><code class="language-vim">if 3 &gt; 2
if a &amp;&amp; b
if (a &amp;&amp; b) || (c &amp;&amp; d)
if !c
</code></pre>
<p>See <code>:help expression-syntax</code>.
See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/22.html">Operators</a></p>
<h3 id="strings-2">Strings</h3>
<pre><code class="language-vim">if name ==# 'John'     " case-sensitive
if name ==? 'John'     " case-insensitive
if name == 'John'      " depends on :set ignorecase

" also: is#, is?, &gt;=#, &gt;=?, and so on
</code></pre>
<h3 id="identity-operators">Identity operators</h3>
<pre><code class="language-vim">a is b
a isnot b
</code></pre>
<p>Checks if itâ€™s the same instance object.</p>
<h3 id="regexp-matches">Regexp matches</h3>
<pre><code class="language-vim">"hello" =~ '/x/'
"hello" !~ '/x/'
</code></pre>
<h3 id="single-line">Single line</h3>
<pre><code class="language-vim">if empty(a:path) | return [] | endif
a ? b : c
</code></pre>
<p>Use <code>|</code> to join lines together.</p>
<h3 id="boolean-logic">Boolean logic</h3>
<pre><code class="language-vim">if g:use_dispatch &amp;&amp; s:has_dispatch
  Â·Â·Â·
endif
</code></pre>
<h2 id="lists">Lists</h2>
<h3 id="lists-1">Lists</h3>
<pre><code class="language-vim">let mylist = [1, two, 3, "four"]

let first = mylist[0]
let last  = mylist[-1]

" Suppresses errors
let second = get(mylist, 1)
let second = get(mylist, 1, "NONE")
</code></pre>
<h3 id="functions-2">Functions</h3>
<pre><code class="language-vim">len(mylist)
empty(mylist)

sort(list)
let sortedlist = sort(copy(list))

split('hello there world', ' ')
</code></pre>
<h3 id="concatenation">Concatenation</h3>
<pre><code class="language-vim">let longlist = mylist + [5, 6]
let mylist += [7, 8]
</code></pre>
<h3 id="sublists">Sublists</h3>
<pre><code class="language-vim">let shortlist = mylist[2:-1]
let shortlist = mylist[2:]     " same

let shortlist = mylist[2:2]    " one item
</code></pre>
<h3 id="push">Push</h3>
<pre><code class="language-vim">let alist = [1, 2, 3]
let alist = add(alist, 4)
</code></pre>
<h3 id="map">Map</h3>
<pre><code class="language-vim">call map(files, "bufname(v:val)")  " use v:val for value
call filter(files, 'v:val != ""')
</code></pre>
<h2 id="dictionaries">Dictionaries</h2>
<h3 id="dictionaries-1">Dictionaries</h3>
<pre><code class="language-vim">let colors = {
  \ "apple": "red",
  \ "banana": "yellow"
}

echo colors["a"]
echo get(colors, "apple")   " suppress error
</code></pre>
<p>See <code>:help dict</code></p>
<h3 id="using-dictionaries">Using dictionaries</h3>
<pre><code class="language-vim">remove(colors, "apple")
</code></pre>
<pre><code class="language-vim">" :help E715
if has_key(dict, 'foo')
if empty(dict)
keys(dict)
len(dict)
</code></pre>
<pre><code class="language-vim">max(dict)
min(dict)
</code></pre>
<pre><code class="language-vim">count(dict, 'x')
string(dict)
</code></pre>
<pre><code class="language-vim">map(dict, '&lt;&gt;&gt; " . v:val')
</code></pre>
<h3 id="iteration">Iteration</h3>
<pre><code class="language-vim">for key in keys(mydict)
  echo key . ': ' . mydict(key)
endfor
</code></pre>
<h3 id="prefixes">Prefixes</h3>
<pre><code class="language-vim">keys(s:)
</code></pre>
<p>Prefixes (<code>s:</code>, <code>g:</code>, <code>l:</code>, etc) are actually dictionaries.</p>
<h3 id="extending">Extending</h3>
<pre><code class="language-vim">" Extending with more
let extend(s:fruits, { ... })
</code></pre>
<h2 id="casting">Casting</h2>
<pre><code class="language-vim">str2float("2.3")
str2nr("3")
float2nr("3.14")
</code></pre>
<h2 id="numbers">Numbers</h2>
<h3 class="-prime" id="numbers-1">Numbers</h3>
<pre><code class="language-vim">let int = 1000
let int = 0xff
let int = 0755   " octal
</code></pre>
<p>See <code>:help Number</code>.
See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/25.html">Numbers</a></p>
<h3 id="floats">Floats</h3>
<pre><code class="language-vim">let fl = 100.1
let fl = 5.4e4
</code></pre>
<p>See <code>:help Float</code></p>
<h3 id="arithmetic">Arithmetic</h3>
<pre><code class="language-vim">3 / 2     "=&gt; 1, integer division
3 / 2.0   "=&gt; 1.5
3 * 2.0   "=&gt; 6.0
</code></pre>
<h3 id="math-functions">Math functions</h3>
<pre><code class="language-vim">sqrt(100)
floor(3.5)
ceil(3.3)
abs(-3.4)

sin() cos() tan()
sinh() cosh() tanh()
asin() acos() atan()
</code></pre>
<h2 id="vim-isms">Vim-isms</h2>
<h3 id="execute-a-command">Execute a command</h3>
<pre><code class="language-vim">execute "vsplit"
execute "e " . fnameescape(filename)
</code></pre>
<p>Runs an ex command you typically run with <code>:</code>. Also see <code>:help execute</code>.
See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/28.html">Execute a command</a></p>
<h3 id="running-keystrokes">Running keystrokes</h3>
<pre><code class="language-vim">normal G
normal! G   " skips key mappings

execute "normal! gg/foo\&lt;cr&gt;dd"
</code></pre>
<p>Use <code>:normal</code> to execute keystrokes as if youâ€™re typing them in normal mode. Combine with <code>:execute</code> for special keystrokes.
See: <a href="http://learnvimscriptthehardway.stevelosh.com/chapters/29.html">Running keystrokes</a></p>
<h3 id="getting-filenames">Getting filenames</h3>
<pre><code class="language-vim">echo expand("%")      " path/file.txt
echo expand("%:t")    " file.txt
echo expand("%:p:h")  " /home/you/path/file.txt
echo expand("%:r")    " path/file
echo expand("%:e")    " txt
</code></pre>
<p>See <code>:help expand</code></p>
<h3 id="silencing">Silencing</h3>
<pre><code class="language-vim">silent g/Aap/p
</code></pre>
<p>Suppresses output. See <code>:help silent</code></p>
<h3 id="echo">Echo</h3>
<pre><code class="language-vim">echoerr 'oh it failed'
echomsg 'hello there'
echo 'hello'

echohl WarningMsg | echomsg "=&gt; " . a:msg | echohl None
</code></pre>
<h3 id="settings">Settings</h3>
<pre><code class="language-vim">set number
set nonumber
set number!     " toggle
set numberwidth=5
set guioptions+=e
</code></pre>
<h3 id="prompts">Prompts</h3>
<pre><code class="language-vim">let result = confirm("Sure?")
execute "confirm q"
</code></pre>
<h3 id="built-ins">Built-ins</h3>
<pre><code class="language-vim">has("feature")  " :h feature-list
executable("python")
globpath(&amp;rtp, "syntax/c.vim")

exists("$ENV")
exists(":command")
exists("variable")
exists("+option")
exists("g:...")
</code></pre>
<h2 class="-three-column" id="mapping">Mapping</h2>
<h3 id="mapping-commands">Mapping commands</h3>
<pre><code class="language-vim">nmap
vmap
imap
xmap
nnoremap
vnoremap
inoremap
xnoremap
...
</code></pre>
<h3 id="explanation">Explanation</h3>
<pre><code class="language-vim">[nvixso](nore)map
</code></pre>
<pre class="-setup"><code> â”‚       â”” don't recurse
 â”‚
 â”” normal, visual, insert,
   eX mode, select, operator-pending
</code></pre>
<h3 id="arguments">Arguments</h3>
<table>
<tbody>
<tr>
<td><code>&lt;buffer&gt;</code></td>
<td>only in current buffer</td>
</tr>
<tr>
<td><code>&lt;silent&gt;</code></td>
<td>no echo</td>
</tr>
<tr>
<td><code>&lt;nowait&gt;</code></td>
<td>Â </td>
</tr>
</tbody>
</table>
<h2 id="syntax">Syntax</h2>
<h3 id="highlights">Highlights</h3>
<pre><code class="language-vim">hi Comment
  term=bold,underline
  gui=bold
  ctermfg=4
  guifg=#80a0ff
</code></pre>
<h3 id="filetype-detection">Filetype detection</h3>
<pre><code class="language-vim">augroup filetypedetect
  au! BufNewFile,BufRead *.json setf javascript
augroup END

au Filetype markdown setlocal spell
</code></pre>
<h3 id="conceal">Conceal</h3>
<pre><code class="language-vim">set conceallevel=2
syn match newLine "&lt;br&gt;" conceal cchar=}
hi newLine guifg=green
</code></pre>
<h3 id="region-conceal">Region conceal</h3>
<pre><code class="language-vim">syn region inBold concealends matchgroup=bTag start="&lt;b&gt;" end="&lt;/b&gt;"
hi inBold gui=bold
hi bTag guifg=blue
</code></pre>
<h3 id="syntax-1">Syntax</h3>
<pre><code class="language-vim">syn match :name ":regex" :flags

syn region Comment  start="/\*"  end="\*/"
syn region String   start=+"+    end=+"+	 skip=+\\"+

syn cluster :name contains=:n1,:n2,:n3...

flags:
  keepend
  oneline
  nextgroup=
  contains=
  contained

hi def link markdownH1 htmlH1
</code></pre>
<h3 id="include-guards">Include guards</h3>
<pre><code class="language-vim">if exists('g:loaded_myplugin')
  finish
endif

" ...

let g:loaded_myplugin = 1
</code></pre>
</main>
</div>
<div class='pre-footer' data-js-no-preview><i class='icon'></i></div>
<section class='comments-area' id='comments' data-js-no-preview>
<div class='container'>
<details class='comments-details'>
<summary>
<strong class='count'>
<span class='disqus-comment-count' data-disqus-identifier="vimscript" data-disqus-url='https://devhints.io/vimscript'>0 Comments</span>
</strong>
<span class='suffix'>for this cheatsheet.</span>
<span class='fauxlink'>Write yours!</span>
</summary>
<div class='comments-section'>
<div class='comments'>
<div id='disqus_thread'></div>
</div>
</div>
</details>
</div>
<noscript data-js-disqus='{"host":"devhints.disqus.com","url":"https://devhints.io/vimscript","identifier":"vimscript"}'></noscript>
</section>
<footer class='search-footer' data-js-no-preview>
<div class='container'>
<div class='search-footer-section'>
 <div class='search'>
<form class='search' action='.' method='get'>
<label class='search-box -small'>
<span class='prefix'>devhints.io</span>
<span class='sep'>/</span>
<input name='q' type='text' placeholder='Search 356+ cheatsheets'>
</label>
</form>
</div>
